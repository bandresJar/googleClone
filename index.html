<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./estilos/main.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!--script>(function(w,d,s,u,f,m,n,o){o='https://survey.zohopublic.com';w[f]=w[f]||function(){(w[f].p=w[f].p||[]).push(arguments);};m=d.createElement(s),n=d.getElementsByTagName(s)[0];m.async=1;m.src=o+u;n.parentNode.insertBefore(m,n);zs_intercept(o,'S7B3ra',{"displayPeriod":2,"position":4,"hideEndPage":true,"vMaps":[{"var_type":0,"c_var_id":"972170000000004033","var_name":"https://probandopush.netlify.app/"}],"timeout":3});})(window, document, 'script', '/api/v1/public/livesurveys/S7B3ra/popup/script', 'zs_intercept');
</script freshdesk para autenticar-->

</head>
<body>
    <header>
        <nav>
            <ul class="nav-right-section">
                <li><a href="Gmail">Gmail</a></li>
                <li><a href="Imagenes">Imagenes</a></li>
                <li class="menu-icon"><a href="MenuGoogle"></a></li>
                <li><a href="PerfilUsuario">
                    <img src="https://lh3.googleusercontent.com/ogw/ADGmqu8-2PwfrfdzBKaKzjXQwADYQls-gH3gogIeskmc=s32-c-mo" alt="mi imagen de perfil">
                </a></li>
            </ul>
        </nav>
    </header>
    
    <main>

        <section class="main-logo">
            <img src="https://assets.stickpng.com/images/580b57fcd9996e24bc43c51f.png" alt="logo de google">
        </section>
        <section class="main-input">
            <div class="main-input-container">
                <span class="search-icon">

                </span>
                <input type="text">
                <a class="micro-icon" href=""></a>
            </div>
        </section>
        <section class="main-buttoms">
            <div>
                <button>Buscar con google</button>
            </div>
            <div>
                <button>Tendre Suerte</button>
            </div>
        </section>
        <section class="main-input">
           <form id="contact-form">
    <input type="email" id="email-input" placeholder="Ingrese su correo electrónico">
     <input  id="name-input" placeholder="Ingrese su Nombre">
    <input  id="apellido-input" placeholder="Ingrese su Apellido">

    <button type="submit" id="submit-button">Enviar</button>
</form>

        </section>
                
    </main>
    <!--div class="popup">
        <iframe src="https://www.startquestion.com/survey/944253/habitanto.html?iframe=1" scrolling="auto" 
                frameborder="0" id="AutoIframeHeight" width="100%" height="100%"></iframe><script 
                type="text/javascript">(window.addEventListener||window.attachEvent)(window.addEventListener?"message":"onmessage",function(e){if(e.data&&"AutoIframeHeight"==e.data.name){document.getElementById(e.data.name).scrolling="SI";var t=function(t){if(e.data.value){var n=document.getElementById(e.data.name);if(n.height=e.data.value,e.data.scroll&&!t){var a=n.getBoundingClientRect().top+document.documentElement.scrollTop;window.scrollTo(0,a)}}};t(!1),setTimeout(function(){t(!0)},1e3)}});</script>
</div-->
    <footer>
    </footer>
 

     <!-- Start of HubSpot Embed Code -->
  <script type="text/javascript" id="hs-script-loader" async defer src="//js-na1.hs-scripts.com/22498467.js"> </script>
 <script type="text/javascript">
    window.hsConversationsSettings = {
        loadImmediately: false
    };

    var emailInput = document.getElementById('email-input');
    var nameInput = document.getElementById('name-input');
    var apellidoInput = document.getElementById('apellido-input');

    // Datos quemados
    var datosQuemados = {
        email: "bandres.jar@gmail.com",
        nombre: "Andres",
        apellido: "jar"
    };

    axios.post('https://us-central1-habitanto-functions.cloudfunctions.net/app/create-hubspot-contact', datosQuemados)
        .then(function (response) {
            console.log(response.data);
            if (response.data.token) {
                window.hsConversationsSettings = {
                    identificationEmail: datosQuemados.email,
                    identificationToken: response.data.token,
                };
                window.HubSpotConversations.widget.load();
            } else {
                console.log('Token not available in response data.');
            }
        })
        .catch(function (error) {
            console.log(error);
        });
</script>

	
<!--Empezando freshdesk-->
<script>
	window.fwSettings={
	'widget_id':154000000811
	};
	!function(){if("function"!=typeof window.FreshworksWidget){var n=function(){n.q.push(arguments)};n.q=[],window.FreshworksWidget=n}}() 
</script>
<script type='text/javascript' src='https://widget.freshworks.com/widgets/154000000811.js' async defer></script>

<script>
    // Función de retorno para regenerar el token antes de la expiración
    function authenticateCallback() {
        console.log('Inicio de la función authenticateCallback');

        // Hacer una solicitud POST a tu Cloud Function para obtener el token
        axios.post('https://us-central1-habitanto.cloudfunctions.net/generarToken', {
                nombre: 'Andres Jar',
                email: 'prueba2@probando.ec',
            })
            .then(response => {
                console.log('Respuesta exitosa de Cloud Function:', response.data);

                // Llamar a la API de autenticación con el token obtenido
                FreshworksWidget('authenticate', {
                    token: response.data.token,
                    callback: authenticateCallback
                });
            })
            .catch(error => {
    console.error('Error en Axios:', error);
    if (error.response) {
        console.error('Respuesta del servidor:', error.response.data);
        console.error('Estado del servidor:', error.response.status);
    } else if (error.request) {
        console.error('No se recibió respuesta del servidor.');
    } else {
        console.error('Error durante la solicitud:', error.message);
    }
});
    }

    // Callback para Freshdesk
    function freshdeskCallback() {
        console.log('Callback de Freshdesk');
        // Puedes agregar lógica adicional según sea necesario
    }
</script>


	
<script>
    console.log('Antes de llamar a authenticateCallback');
    authenticateCallback(); // Llama a la función directamente al cargar la página
    console.log('Después de llamar a authenticateCallback');

    // Configuración de Freshdesk con el callback
    FreshworksWidget('on', 'widget:load', function () {
        FreshworksWidget('on', 'contact:opened', freshdeskCallback);
        FreshworksWidget('on', 'article:opened', freshdeskCallback);
    });
</script>
    
    
    <!--script>
    // Encuentra el botón por su atributo data-test-id
    var boton = document.querySelector('[data-test-id="chat-widget-launcher"] button');

    // Aplica los estilos de tamaño y color al botón
    boton.style.width = '80%';
    boton.style.height = '80%';
    boton.style.backgroundColor = 'black';
</script-->

</body>
</html>
